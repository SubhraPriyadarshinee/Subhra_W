"use strict";(self.webpackChunkreceiving_web=self.webpackChunkreceiving_web||[]).push([[978],{785:function(e,t,n){n.d(t,{W:function(){return i}});var i={titleContainer:{display:"flex",justifyContent:"space-between",m:3,mt:4,mb:1,fontWeight:"bold"},button:{borderRadius:"20px",fontWeight:"bold",m:.5},paddedButton:{borderRadius:"20px",fontWeight:"bold",m:.5,margin:"20px",paddingLeft:"100px",paddingRight:"100px"},textButton:{fontWeight:"bold",m:.5},paper:{borderRadius:"16px 16px 16px 16px",width:"100%",maxHeight:"100%"}}},9850:function(e,t,n){n.d(t,{T:function(){return x}});var i=n(1413),r=n(2791),o=n(9823),a=n(4554),l=n(6151),s=n(5289),c=n(7123),u=n(9157),d=n(1691),m=n(4721),v=n(3400),p=n(890),g=n(785),h=n(184),x=(0,r.memo)((function(e){var t=e.open,n=e.getHeader,r=e.getContent,x=e.handleClose,f=e.handleConfirm;return(0,h.jsx)("div",{children:(0,h.jsxs)(s.Z,{open:t,onClose:x,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",PaperProps:{sx:g.W.paper},children:[(0,h.jsxs)(a.Z,{sx:g.W.titleContainer,children:[(0,h.jsx)(p.Z,{gutterBottom:!0,variant:"h4",component:"div",children:(0,h.jsx)("b",{children:n})}),(0,h.jsx)(v.Z,{"aria-label":"close",onClick:x,children:(0,h.jsx)(o.Z,{fontSize:"large"})})]}),(0,h.jsx)(u.Z,{sx:{mb:20},children:(0,h.jsx)(d.Z,{id:"alert-dialog-description",sx:{fontSize:"25px",color:"black"},children:r})}),(0,h.jsx)(m.Z,{}),(0,h.jsxs)(c.Z,{sx:{m:2},children:[(0,h.jsx)(l.Z,{variant:"outlined",size:"large",onClick:x,sx:(0,i.Z)((0,i.Z)({},g.W.button),{},{color:"primary.dark",borderColor:"primary.dark"}),children:"Cancel"},"cancel"),(0,h.jsx)(l.Z,{variant:"contained",size:"large",sx:g.W.button,onClick:f,children:"Confirm"},"receive")]})]})})}))},6978:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var i=n(5861),r=n(1413),o=n(9439),a=n(7757),l=n.n(a),s=n(7408),c=n(2791),u=n(6871),d=n(1918),m=n(6151),v=n(1692),p=n(6214),g=n(4934),h=n(5675),x=n(3903),f=n(5178),y=n(9654),b=n(3590),j=n(7895),C=n(8480),Z=n(9850),D=n(3886),k=n(9923),S=n(4243),I=n(626),L={button:{borderRadius:"20px",fontWeight:"bold",m:.5},formContainer:{display:"flex-row",justifyContent:"space-between"},chip:{borderRadius:0,marginLeft:2,top:16}},Q=n(4790),w=n(184),N=j.d.getSessionStorage("myApps"),U=(null===N||void 0===N?void 0:N.dynamicConfig.enableQtyCorrection)||!1,T=function(e){return(0,x.i)(g.GH.getReceiveInstruction(e),{description:"Item-Quantity: receive items for upc ".concat(e.upcNumber," delivery ").concat(e.deliveryNumber)})};function R(){var e,t,n=(0,C.j)(),a=(0,u.s0)(),g=(0,c.useContext)(v.w),x=g.alerts,N=g.setAlerts,R=(0,c.useContext)(p.z),F=R.globals,W=R.setGlobals,q=(0,c.useState)(""),A=(0,o.Z)(q,2),E=A[0],O=A[1],B=(0,c.useState)(!1),M=(0,o.Z)(B,2),H=M[0],z=M[1],G=(0,c.useState)(!1),K=(0,o.Z)(G,2),V=K[0],J=K[1],Y=(0,c.useState)(!1),_=(0,o.Z)(Y,2),$=_[0],X=_[1],ee=(0,c.useState)(!1),te=(0,o.Z)(ee,2),ne=te[0],ie=te[1],re=(0,c.useState)((0,w.jsx)(w.Fragment,{})),oe=(0,o.Z)(re,2),ae=oe[0],le=oe[1],se=(0,c.useState)((0,w.jsx)(w.Fragment,{})),ce=(0,o.Z)(se,2),ue=ce[0],de=ce[1],me=(0,c.useState)((0,w.jsx)(w.Fragment,{})),ve=(0,o.Z)(me,2),pe=ve[0],ge=ve[1],he=(0,c.useState)(!1),xe=(0,o.Z)(he,2),fe=xe[0],ye=xe[1],be=j.d.getSessionStorage("myApps"),je=(null===be||void 0===be?void 0:be.dynamicConfig.enableRegulatedItemChange)||!1,Ce=(null===be||void 0===be?void 0:be.dynamicConfig.enableReceivingLargeQuantityLimit)||!1,Ze=(null===be||void 0===be?void 0:be.dynamicConfig.receivingSoftLimit)||0,De=(0,c.useCallback)((function(e){h.t7.info("Item-Quantity: printjob success",e),N({success:"Labels were sent to printing"}),h.t7.action("Item-Quantity: navigate to scan-dock-tag page"),a("/scan-dock-tag-or-tcl",{state:{cartId:null===n||void 0===n?void 0:n.cartId,doorNumber:null===n||void 0===n?void 0:n.doorNumber}})}),[N,n,a]),ke=(0,c.useCallback)((function(){F.multiSku&&ne?ge((0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.Z,{label:"MULTI SKU",color:"primary",sx:L.chip}),(0,w.jsx)(d.Z,{label:"TRUSTED",color:"info",sx:L.chip})]})):F.multiSku?ge((0,w.jsx)(w.Fragment,{children:(0,w.jsx)(d.Z,{label:"MULTI SKU",color:"primary",sx:L.chip})})):ge(ne?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.Z,{label:"SINGLE SKU",color:"default",sx:L.chip}),(0,w.jsx)(d.Z,{label:"TRUSTED",color:"success",sx:L.chip})]}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(d.Z,{label:"SINGLE SKU",color:"default",sx:L.chip})}))}),[F.multiSku,ne]);(0,c.useEffect)((function(){n&&n.itemQuantity&&(O(n.itemQuantity),ie(!0)),ke()}),[n,O,ie,ke]);var Se=(0,c.useCallback)((function(e){h.t7.error("Item-Quantity: printjob error",e),N({error:"There was an error printing. Check the printer status or re-connect to continue."})}),[N]),Ie=(0,y.G)({onPrintRequestSuccess:De,onPrintRequestError:Se}),Le=(0,o.Z)(Ie,1)[0],Qe=(0,s.useMutation)(T,{onSuccess:function(e){return function(e){var t;W((0,r.Z)((0,r.Z)({},F),{},{previouslyScannedDataList:[]}));var i=null===(t=e.data.instruction)||void 0===t?void 0:t.container.inventoryStatus,o=e.data.printJob;switch(i){case"PICKED":o?(h.t7.info("Item-Quantity: printjob request",o),Le(o)):(h.t7.error("Item-Quantity: printjob not found",{}),console.error("No print job found"),N({error:"No print job found"}));break;case"AVAILABLE":var l,s=(null===(l=e.data.instruction)||void 0===l?void 0:l.container.trackingId)||"";h.t7.action("Item-Quantity: navigate to breakpack page"),U||W((0,r.Z)((0,r.Z)({},F),{},{disableQuantityCorrection:!1})),a("/breakpack",{state:(0,r.Z)((0,r.Z)({},n),{},{splitQty:0,trackingId:s,printJob:o})});break;default:h.t7.error("Item-Quantity: inventoryStatus ".concat(i," not supported"),{}),console.error("Other types are not supported yet"),N({error:"Other inventoryStatus ".concat(i," not supported.")})}}(e)},onError:function(e){return function(e){var t,n;N({error:(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.errorMessage)||(null===e||void 0===e?void 0:e.message)||"Error while receiving"})}(e)}}).mutate,we=(0,c.useCallback)((0,i.Z)(l().mark((function e(){var t,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n||void 0===n||!n.scannedUpc||null===n||void 0===n||!n.doorNumber){e.next=9;break}return t=P(null===n||void 0===n?void 0:n.gdmDeliveryDocuments),i={deliveryNumber:"".concat(null===n||void 0===n?void 0:n.deliveryNumber),doorNumber:"".concat(null===n||void 0===n?void 0:n.doorNumber),upcNumber:null===n||void 0===n?void 0:n.scannedUpc,deliveryDocuments:t,enteredQty:parseInt(E),isMultiSKUItem:F.multiSku,scannedDataList:n.scannedDataList,receivingType:n.receivingType,previouslyScannedDataList:F.previouslyScannedDataList},e.next=5,f.T.isPrinterSelected();case 5:e.sent?(N({loading:!0}),Qe(je?Object.assign(i,{isVendorComplianceValidated:!0}):i)):(N({error:"No printer selected, please select a printer to receive"}),h.t7.error("Item-Quantity: No printer selected, please select a printer to receive",{})),e.next=11;break;case 9:N({error:"doorNumber or upcNumber is missing"}),h.t7.error("Item-Quantity: doorNumber or upcNumber is missing",{});case 11:case"end":return e.stop()}}),e)}))),[E,n,N,Qe,F.multiSku,F.previouslyScannedDataList,je]),Ne=(0,c.useCallback)((function(){h.t7.action("Item-Quantity: cancel button clicked"),a(-1)}),[a]),Ue=(0,c.useCallback)((function(){h.t7.action("Item-Quantity: receive button clicked"),(je?null:(0,S.GF)(null===n||void 0===n?void 0:n.gdmDeliveryDocuments[0].deliveryDocumentLines[0].transportationModes))?(h.t7.action("Item-Quantity: show regulated item pop up"),z(!0)):we()}),[we,z,n,je]),Te=(0,c.useCallback)((function(){h.t7.info("Update-Item-Quantity: Approved for editing trusted seller quantity",{}),X(!1),Ue()}),[Ue,X]),Re=(0,c.useCallback)((function(){h.t7.info("Item-Quantity: approved all regulated items are labelled",{}),z(!1),we()}),[we,z]),Pe=(0,c.useCallback)((0,i.Z)(l().mark((function e(){var t,i,r,o,a,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null!=(null===n||void 0===n||null===(t=n.gdmDeliveryDocuments[0].deliveryDocumentLines[0])||void 0===t?void 0:t.openQty)||void 0!==(null===n||void 0===n||null===(i=n.gdmDeliveryDocuments[0].deliveryDocumentLines[0])||void 0===i?void 0:i.openQty)?null===n||void 0===n||null===(r=n.gdmDeliveryDocuments[0].deliveryDocumentLines[0])||void 0===r?void 0:r.openQty:null,a=parseInt(E),e.next=4,f.T.isPrinterSelected();case 4:s=e.sent,c=n&&n.itemQuantity?parseInt(n.itemQuantity):null,null===o&&null!==c&&c!==a?s?(le((0,w.jsx)(w.Fragment,{children:"Warning alert!"})),de((0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:"You are trying to edit trusted seller case quantity. Please re-confirm or cancel to return."})})),X(!0)):N({error:"There was an error printing. Check the printer status or re-connect to continue."}):null!==o&&null!==c&&a>o&&a!==c?s?(le((0,w.jsx)(w.Fragment,{children:"Warning alert!"})),de((0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:"You are trying to edit trusted seller case quantity and the quantity entered will result in overages. Please confirm or cancel to return."})})),X(!0)):N({error:"There was an error printing. Check the printer status or re-connect to continue."}):null!==o&&null!==c&&a<=o&&a!==c?s?(le((0,w.jsx)(w.Fragment,{children:"Warning alert!"})),de((0,w.jsx)(w.Fragment,{children:(0,w.jsx)("p",{children:"You are trying to edit trusted seller case quantity. Please re-confirm or cancel to return."})})),X(!0)):N({error:"There was an error printing. Check the printer status or re-connect to continue."}):null!==o&&a>o?s?(le((0,w.jsx)(w.Fragment,{children:"Overage Quantity"})),de((0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("p",{children:["The quantity entered will result in overages.",(0,w.jsx)("br",{}),"Please confirm or cancel to return."]})})),J(!0)):N({error:"There was an error printing. Check the printer status or re-connect to continue."}):Ue();case 7:case"end":return e.stop()}}),e)}))),[Ue,J,E,n,N]),Fe=(0,c.useCallback)((function(){h.t7.info("Item-Quantity: approved for quantity overage",{}),J(!1),Ue()}),[Ue,J]);(0,k.q)({disabled:!0});var We=(0,c.useCallback)((function(){var e,t=parseInt(E),i=n?null===(e=n.gdmDeliveryDocuments[0])||void 0===e?void 0:e.deliveryDocumentLines[0].itemNbr:0,r=n?n.gdmDeliveryDocuments[0].purchaseReferenceNumber:0;Ce&&t>Ze?(h.t7.action("Large Quantity Receiving: Soft Limit Alert - Receiving ".concat(t," unit of item ").concat(i," of PO: ").concat(r," excess limit ").concat(Ze)),le((0,w.jsx)(w.Fragment,{children:"Receiving Large Quantity Alert!"})),de((0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("p",{children:["Please validate that you are receiving ",t," units of item ",i]})})),ye(!0)):Pe()}),[Pe,E,n]),qe=(0,c.useCallback)((function(){h.t7.info("Item-Quantity: confirmed for large quantity ",{}),ye(!1),Pe()}),[Pe,ye]),Ae=n?null===(e=n.gdmDeliveryDocuments[0])||void 0===e?void 0:e.deliveryDocumentLines[0].itemNbr:0,Ee=n?(0,b.iu)(n.gdmDeliveryDocuments):"",Oe=n?(0,b.HU)(n.gdmDeliveryDocuments):"",Be=(null===n||void 0===n||null===(t=n.gdmDeliveryDocuments[0])||void 0===t?void 0:t.deliveryDocumentLines[0].additionalInfo.imageUrl)||"";return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(D.b,{title:"UPC: ".concat(Oe," Count and enter qty"),enableBack:!0,chip:pe,actions:[(0,w.jsx)(m.Z,{variant:"outlined",size:"large",onClick:Ne,sx:(0,r.Z)((0,r.Z)({},L.button),{},{color:"primary.dark",borderColor:"primary.dark"}),children:"Cancel"},"cancel"),(0,w.jsx)(m.Z,{variant:"contained",size:"large",sx:L.button,disabled:!parseInt(E)||x.loading,onClick:We,children:"Receive"},"receive")]}),(0,w.jsx)(Q.p,{imageUrl:Be,itemNbr:Ae,itemUPC:Oe,itemDescription:Ee,value:E,setValue:O,inputLabel:"Enter Quantity"}),H&&(0,w.jsx)(I.T,{regulatedItemDeliveryDocLine:null===n||void 0===n?void 0:n.gdmDeliveryDocuments[0].deliveryDocumentLines[0],open:H,onApprove:Re,onClose:function(){z(!1)}}),$&&(0,w.jsx)(Z.T,{getHeader:ae,getContent:ue,handleConfirm:Te,handleClose:function(){X(!1)},open:$}),V&&(0,w.jsx)(Z.T,{getHeader:ae,getContent:ue,handleConfirm:Fe,handleClose:function(){J(!1)},open:V}),fe&&(0,w.jsx)(Z.T,{getHeader:ae,getContent:ue,handleConfirm:qe,handleClose:function(){h.t7.info("Item-Quantity: declined for large quantity ",{}),ye(!1)},open:fe})]})}var P=function(e){var t=JSON.parse(JSON.stringify(e)),n=j.d.getSessionStorage("myApps"),i=(null===n||void 0===n?void 0:n.dynamicConfig.enableRegulatedItemChange)||!1;return t.forEach((function(e){e.deliveryDocumentLines.forEach((function(e){e.gtin=i?e.itemUpc:e.itemUPC}))})),t}},4790:function(e,t,n){n.d(t,{p:function(){return b}});var i=n(4942),r=n(2791),o=n(9772),a=n(4554),l=n(7621),s=n(9504),c=n(2169),u=n(8096),d=n(3466),m=n(4925),v=n(8029),p=n(7391),g=n(890),h=n(7630),x=n(184),f={itemDescription:{display:"-webkit-box",WebkitLineClamp:"4",WebkitBoxOrient:"vertical",textOverflow:"ellipsis",overflow:"hidden"}},y=(0,h.ZP)(a.Z)((function(e){var t=e.theme;return(0,i.Z)({display:"flex",margin:t.spacing(2)},t.breakpoints.down("sm"),{flexDirection:"column-reverse",alignItems:"center"})})),b=function(e){var t=e.imageUrl,n=e.itemNbr,i=e.itemUPC,a=e.itemDescription,h=e.value,b=e.setValue,j=e.inputLabel,C=e.isUpdate,Z=e.remainingQty,D=(0,r.useCallback)((function(e){var t=e.target.value;/^\d*$/.test(t)&&b(t)}),[b]),k=function(){return(Z||0)>Number(h)};return(0,x.jsxs)(y,{children:[(0,x.jsxs)(l.Z,{sx:{width:["100%","30ch"]},children:[(0,x.jsx)(c.Z,{component:"img",image:t,alt:"".concat(a),sx:{height:[240]}}),(0,x.jsxs)(s.Z,{children:[(0,x.jsx)(g.Z,{gutterBottom:!0,variant:"h6",component:"div",children:"UPC: ".concat(i)}),(0,x.jsx)(g.Z,{gutterBottom:!0,variant:"h6",component:"div",children:"Item: ".concat(n)}),(0,x.jsx)(g.Z,{variant:"body2",color:"text.secondary",sx:f.itemDescription,children:a})]})]}),C&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(u.Z,{sx:{m:4,mt:0,width:["100%","15ch"]},variant:"outlined",children:[(0,x.jsx)("p",{children:(0,x.jsx)("b",{children:"Remaining Qty"})}),(0,x.jsx)("p",{children:(0,x.jsx)("b",{children:Z})})]}),(0,x.jsxs)(u.Z,{sx:{m:2,mt:0,width:["100%","40ch"]},variant:"outlined",children:[(0,x.jsx)("p",{children:(0,x.jsx)("b",{children:j})}),(0,x.jsx)(p.Z,{id:j,error:!k(),helperText:k()?"":(Z||0)!==Number(h)?"Enter quantity less than ".concat(Z):"The quantity entered will result in no change, enter a quantity less than  ".concat(Z," to adjust the label"),type:"number",autoComplete:"off",value:h,onChange:D})]})]}),!C&&(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(u.Z,{sx:{m:2,mt:0,width:["100%","40ch"]},variant:"outlined",children:[(0,x.jsx)(v.Z,{id:j,type:"number",autoComplete:"off",value:h,onChange:D,endAdornment:(0,x.jsx)(d.Z,{position:"end",children:(0,x.jsx)(o.Z,{})}),label:j}),(0,x.jsx)(m.Z,{children:j})]})})]})}},626:function(e,t,n){n.d(t,{T:function(){return g}});var i=n(2791),r=n(4554),o=n(6151),a=n(5289),l=n(7123),s=n(9157),c=n(5661),u=n(890),d=n(7895),m=n(7774),v=n(1632),p=n(184),g=(0,i.memo)((function(e){var t=e.open,n=e.onApprove,i=e.onClose,g=e.regulatedItemDeliveryDocLine;if(!g)return null;var h=d.d.getSessionStorage("myApps"),x=(null===h||void 0===h?void 0:h.dynamicConfig.enableRegulatedItemChange)||!1,f=x?g.description:g.itemDescription1,y=x?g.itemUpc:g.itemUPC,b=(0,m.Cn)(g),j=b.text,C=void 0===j?"":j,Z=b.images;return(0,p.jsxs)(a.Z,{open:t,onClose:i,"aria-labelledby":"regulated-item-modal-title","aria-describedby":"regulated-item-modal-description",children:[(0,p.jsxs)(c.Z,{id:"alert-dialog-title",sx:v.W.dialogText,children:[(0,p.jsx)(u.Z,{variant:"h6",component:"div",sx:{fontWeight:"bold"},children:C}),(0,p.jsx)(u.Z,{variant:"caption",component:"div",children:"Please confirm all cases include the labels below."})]}),(0,p.jsxs)(s.Z,{sx:v.W.dialogText,children:[(0,p.jsx)(m.jS,{imageUrls:Z}),(0,p.jsxs)(r.Z,{id:"alert-dialog-description",sx:{color:"white"},children:[(0,p.jsx)(u.Z,{variant:"h6",sx:v.W.itemDescription,children:f}),(0,p.jsx)(u.Z,{gutterBottom:!0,variant:"body2",children:"UPC: ".concat(y)})]})]}),(0,p.jsx)(r.Z,{sx:v.W.info,children:"Please apply this label or confirm the label is applied."}),(0,p.jsx)(l.Z,{children:(0,p.jsx)(o.Z,{variant:"contained",sx:v.W.button,onClick:n,children:"Continue"})})]})}));g.displayName="RegulatedItemModal"},3590:function(e,t,n){n.d(t,{HU:function(){return o},iu:function(){return a},nC:function(){return l}});var i=n(7895).d.getSessionStorage("myApps"),r=(null===i||void 0===i?void 0:i.dynamicConfig.enableRegulatedItemChange)||!1,o=function(e){var t,n,i=(null===(t=e[0])||void 0===t?void 0:t.deliveryDocumentLines[0].itemUpc)||"",o=(null===(n=e[0])||void 0===n?void 0:n.deliveryDocumentLines[0].itemUPC)||"";return r?i:o},a=function(e){var t,n,i=(null===(t=e[0])||void 0===t?void 0:t.deliveryDocumentLines[0].description)||"",o=(null===(n=e[0])||void 0===n?void 0:n.deliveryDocumentLines[0].itemDescription1)||"";return r?i:o},l=function(e){var t=e.deliveryDocumentLines.reduce((function(e,t){return e+t.expectedQty}),0),n=e.deliveryDocumentLines.reduce((function(e,t){return e+(t.totalOrderQty||0)}),0);return r?n:t}},5661:function(e,t,n){var i=n(7462),r=n(3366),o=n(2791),a=n(8182),l=n(2039),s=n(890),c=n(7630),u=n(1046),d=n(7673),m=n(5090),v=n(184),p=["className","id"],g=(0,c.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),h=o.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiDialogTitle"}),s=n.className,c=n.id,h=(0,r.Z)(n,p),x=n,f=function(e){var t=e.classes;return(0,l.Z)({root:["root"]},d.a,t)}(x),y=o.useContext(m.Z).titleId,b=void 0===y?c:y;return(0,v.jsx)(g,(0,i.Z)({component:"h2",className:(0,a.Z)(f.root,s),ownerState:x,ref:t,variant:"h6",id:b},h))}));t.Z=h}}]);
//# sourceMappingURL=978.c7bfa9c9.chunk.js.map