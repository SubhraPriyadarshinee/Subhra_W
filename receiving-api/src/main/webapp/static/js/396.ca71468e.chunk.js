"use strict";(self.webpackChunkreceiving_web=self.webpackChunkreceiving_web||[]).push([[396],{3621:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var i=t(1413),o=t(9439),r=t(7408),l=t(2791),a=t(6871),u=t(4554),c=t(6151),d=t(3400),s=t(703),v=t(4663),m=t(890),p=t(1692),f=t(6214),b=t(7912),g=t(5675),y=t(3903),x=t(3590),h=t(7895),C=t(6062),Z=t(8480),S=t(8533),D=t(3886),j=t(9923),N=t(626),P={button:{borderColor:"primary.dark",borderRadius:20,color:"primary.dark",fontWeight:"bold"},paper:{margin:"0px 8px",width:"100%"},poText:{flexGrow:1,fontWeight:"bold"},poTextsWrapper:{display:"flex",flexWrap:"wrap",mt:2}},k=t(184),w=function(e){return(0,y.i)(b.GH.getReceiveInstruction(e),{description:"po-selection: get upc ".concat(e.upcNumber," details")})};function R(){var e=(0,Z.j)(),n=null===e||void 0===e?void 0:e.gdmDeliveryDocuments,t=(0,l.useState)(null),b=(0,o.Z)(t,2),y=b[0],R=b[1],L=(0,l.useState)(!1),I=(0,o.Z)(L,2),T=I[0],W=I[1],A=(0,a.s0)(),Q=(0,l.useContext)(p.w).setAlerts,q=(0,l.useContext)(f.z).globals,M=h.d.getSessionStorage("myApps"),O=(null===M||void 0===M?void 0:M.dynamicConfig.enableRegulatedItemChange)||!1,V=(null===M||void 0===M?void 0:M.dynamicConfig.disablePoSelectionButton)||!1,E=function(n){var t,o=n.data.deliveryDocuments;R(o);var r=(null===(t=n.data.instruction)||void 0===t?void 0:t.instructionCode)||null,l=(0,i.Z)((0,i.Z)({},e),{},{gdmDeliveryDocuments:o});if("WFS Quantity Capture"===r)Q({success:"UPC found"}),g.t7.action("Scan-Upc: navigate to item-quantity page"),A("/item-quantity",{state:l});else{var a,u,c=(null===(a=o[0].deliveryDocumentLines[0])||void 0===a?void 0:a.isLithiumIonVerificationRequired)||!1;(null===(u=o[0].deliveryDocumentLines[0])||void 0===u?void 0:u.isLimitedQtyVerificationRequired)||!1||c?(g.t7.action("Scan-Upc: checking for regulated Item"),W(!0)):(Q({error:"No POs are available"}),g.t7.error("Scan-Upc: no po's availaible for scanned upc",{}))}},z=function(e){var n,t;Q({error:(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data.description)&&(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data.description[0])||(null===e||void 0===e?void 0:e.message)||"UPC error"})},B=(0,r.useMutation)(w,{onSuccess:function(e){return E(e)},onError:function(e){return z(e)}}).mutate,F=(0,l.useCallback)((function(){g.t7.info("po-selection: approved all regulated items are labelled",{}),W(!1),B({deliveryNumber:"".concat(null===e||void 0===e?void 0:e.deliveryNumber),doorNumber:"".concat(null===e||void 0===e?void 0:e.doorNumber),upcNumber:"".concat(null===e||void 0===e?void 0:e.scannedUpc),deliveryDocuments:y,enteredQty:null,isMultiSKUItem:q.multiSku,isVendorComplianceValidated:!0})}),[B,W,y,q.multiSku,e]),H=(0,r.useQuery)(["multiPo",y],(function(){return Q({loading:!0}),w({deliveryNumber:"".concat(null===e||void 0===e?void 0:e.deliveryNumber),doorNumber:"".concat(null===e||void 0===e?void 0:e.doorNumber),upcNumber:"".concat(null===e||void 0===e?void 0:e.scannedUpc),deliveryDocuments:y,enteredQty:null,isMultiSKUItem:q.multiSku,isVendorComplianceValidated:!1})}),{enabled:!!y,onSuccess:E,onError:z}).refetch,G=(0,l.useCallback)((function(t){var o=U(t,n);Q({loading:!1,success:null,error:null}),o.length?O?(g.t7.action("Po-Selection: getting Regulated Item Details"),R(o)):(g.t7.action("Po-Selection: navigate to item-quantity page"),A("/item-quantity",{state:(0,i.Z)((0,i.Z)({},e),{},{gdmDeliveryDocuments:o})})):(setTimeout((function(){return Q({loading:!1,success:null,error:"No Po Found"})}),0),g.t7.error("Po-Selection: no po found for scanned/enetered value",{}),console.error("Error: No Po Found"))}),[A,e,n,Q,R,O]),K=(0,l.useCallback)((function(e){return function(){g.t7.action("Po-Selection: po ".concat(e," selected")),y&&y[0].purchaseReferenceNumber===e?H():G(e)}}),[G,H,y]),_=(0,l.useCallback)((function(e){g.t7.action("Po-Selection: po ".concat(e," scanned")),G(e)}),[G]);return(0,C.T)((function(e){var n=e.detail.parsed.get("1D");n?_(n):Q({error:"Unexpected barcode scanned ".concat(e.detail.scanned)})})),(0,j.q)({title:"Enter PO",inputLabel:"PO",onClickGlobalKeyboardConfirm:function(e){return G(e)}}),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(D.b,{title:"Scan or Select PO",enableBack:!0}),T&&(0,k.jsx)(N.T,{regulatedItemDeliveryDocLine:y?y[0].deliveryDocumentLines[0]:null,open:T,onApprove:F,onClose:function(){W(!1)}}),(0,k.jsx)(u.Z,{sx:P.poTextsWrapper,children:null===n||void 0===n?void 0:n.map((function(e){var n=(0,x.nC)(e);return(0,k.jsx)(s.Z,{elevation:1,sx:P.paper,children:(0,k.jsxs)(v.Z,{children:[(0,k.jsx)(d.Z,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},disabled:!0,children:(0,k.jsx)(S.S,{})}),(0,k.jsx)(m.Z,{variant:"h6",component:"div",sx:P.poText,children:"PO: ".concat(e.purchaseReferenceNumber," \xa0\xa0\xa0 PO Qty: ").concat(n)}),!V&&(0,k.jsx)(c.Z,{variant:"outlined",onClick:K(e.purchaseReferenceNumber),size:"large",sx:P.button,children:"Select"})]})},e.purchaseReferenceNumber)}))})]})}var U=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.filter((function(n){return n.purchaseReferenceNumber===e}))}},626:function(e,n,t){t.d(n,{T:function(){return f}});var i=t(2791),o=t(4554),r=t(6151),l=t(5289),a=t(7123),u=t(9157),c=t(5661),d=t(890),s=t(7895),v=t(7774),m=t(1632),p=t(184),f=(0,i.memo)((function(e){var n=e.open,t=e.onApprove,i=e.onClose,f=e.regulatedItemDeliveryDocLine;if(!f)return null;var b=s.d.getSessionStorage("myApps"),g=(null===b||void 0===b?void 0:b.dynamicConfig.enableRegulatedItemChange)||!1,y=g?f.description:f.itemDescription1,x=g?f.itemUpc:f.itemUPC,h=(0,v.Cn)(f),C=h.text,Z=void 0===C?"":C,S=h.images;return(0,p.jsxs)(l.Z,{open:n,onClose:i,"aria-labelledby":"regulated-item-modal-title","aria-describedby":"regulated-item-modal-description",children:[(0,p.jsxs)(c.Z,{id:"alert-dialog-title",sx:m.W.dialogText,children:[(0,p.jsx)(d.Z,{variant:"h6",component:"div",sx:{fontWeight:"bold"},children:Z}),(0,p.jsx)(d.Z,{variant:"caption",component:"div",children:"Please confirm all cases include the labels below."})]}),(0,p.jsxs)(u.Z,{sx:m.W.dialogText,children:[(0,p.jsx)(v.jS,{imageUrls:S}),(0,p.jsxs)(o.Z,{id:"alert-dialog-description",sx:{color:"white"},children:[(0,p.jsx)(d.Z,{variant:"h6",sx:m.W.itemDescription,children:y}),(0,p.jsx)(d.Z,{gutterBottom:!0,variant:"body2",children:"UPC: ".concat(x)})]})]}),(0,p.jsx)(o.Z,{sx:m.W.info,children:"Please apply this label or confirm the label is applied."}),(0,p.jsx)(a.Z,{children:(0,p.jsx)(r.Z,{variant:"contained",sx:m.W.button,onClick:t,children:"Continue"})})]})}));f.displayName="RegulatedItemModal"},3590:function(e,n,t){t.d(n,{HU:function(){return r},iu:function(){return l},nC:function(){return a}});var i=t(7895).d.getSessionStorage("myApps"),o=(null===i||void 0===i?void 0:i.dynamicConfig.enableRegulatedItemChange)||!1,r=function(e){var n,t,i=(null===(n=e[0])||void 0===n?void 0:n.deliveryDocumentLines[0].itemUpc)||"",r=(null===(t=e[0])||void 0===t?void 0:t.deliveryDocumentLines[0].itemUPC)||"";return o?i:r},l=function(e){var n,t,i=(null===(n=e[0])||void 0===n?void 0:n.deliveryDocumentLines[0].description)||"",r=(null===(t=e[0])||void 0===t?void 0:t.deliveryDocumentLines[0].itemDescription1)||"";return o?i:r},a=function(e){var n=e.deliveryDocumentLines.reduce((function(e,n){return e+n.expectedQty}),0),t=e.deliveryDocumentLines.reduce((function(e,n){return e+(n.totalOrderQty||0)}),0);return o?t:n}},7394:function(e,n,t){var i=t(5318);n.Z=void 0;var o=i(t(5649)),r=t(184),l=(0,o.default)((0,r.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");n.Z=l},5661:function(e,n,t){var i=t(7462),o=t(3366),r=t(2791),l=t(8182),a=t(2039),u=t(890),c=t(7630),d=t(1046),s=t(7673),v=t(5090),m=t(184),p=["className","id"],f=(0,c.ZP)(u.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,n){return n.root}})({padding:"16px 24px",flex:"0 0 auto"}),b=r.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiDialogTitle"}),u=t.className,c=t.id,b=(0,o.Z)(t,p),g=t,y=function(e){var n=e.classes;return(0,a.Z)({root:["root"]},s.a,n)}(g),x=r.useContext(v.Z).titleId,h=void 0===x?c:x;return(0,m.jsx)(f,(0,i.Z)({component:"h2",className:(0,l.Z)(y.root,u),ownerState:g,ref:n,variant:"h6",id:h},b))}));n.Z=b},7762:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(181);function o(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=(0,i.Z)(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){u=!0,l=e},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw l}}}}}}]);
//# sourceMappingURL=396.ca71468e.chunk.js.map