"use strict";(self.webpackChunkreceiving_web=self.webpackChunkreceiving_web||[]).push([[527],{5644:function(e,n,t){t.d(n,{D:function(){return l}});var o=t(4554),a=t(1918),r=t(703),i={bottomSpace:{borderTop:"1px solid lightgray",m:2,pb:10},chip:{borderRadius:0,left:16,position:"absolute",top:16},wrapper:{alignItems:"center",display:"flex",height:50,justifyContent:"center",position:"relative"},center:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"}},c=t(184),l=function(e){var n=e.id,t=e.children;return(0,c.jsxs)(r.Z,{elevation:2,sx:{m:2},children:[(0,c.jsx)(o.Z,{sx:i.wrapper,children:n&&(0,c.jsx)(a.Z,{label:n,color:"primary",sx:i.chip})}),(0,c.jsx)(o.Z,{sx:i.center,children:t}),(0,c.jsx)(o.Z,{sx:i.bottomSpace})]})}},8313:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var o=t(5861),a=t(1413),r=t(9439),i=t(7757),c=t.n(i),l=t(7408),s=t(2791),d=t(6871),u=t(4554),v=t(3400),p=t(1692),g=t(6214),f=t(7912),m=t(5675),b=t(3903),y=t(7895),T=t(6062),h=t(8480),k=t(5644),x=t(8533),D=t(8188),Z=t(3886),S=t(9923),C=t(9654),j=t(5178),L=t(626),I=t(4243),N=t(7661),P=t(2810),w=t(184),O=(0,P.Z)();function R(){var e=(0,h.j)(),n=(0,d.s0)(),t=(0,s.useState)(""),i=(0,r.Z)(t,2),P=i[0],R=i[1],A=(0,s.useState)(""),H=(0,r.Z)(A,2),E=H[0],M=H[1],U=(0,s.useState)(""),B=(0,r.Z)(U,2),q=B[0],G=B[1],W=(0,s.useState)(!1),z=(0,r.Z)(W,2),Q=z[0],V=z[1],F=(0,s.useState)(null),K=(0,r.Z)(F,2),_=K[0],J=K[1],X=(0,s.useState)(!1),Y=(0,r.Z)(X,2),$=Y[0],ee=Y[1],ne=(0,s.useState)(null),te=(0,r.Z)(ne,2),oe=te[0],ae=te[1],re=(0,s.useState)(),ie=(0,r.Z)(re,2),ce=ie[0],le=ie[1],se=(0,s.useState)(null),de=(0,r.Z)(se,2),ue=de[0],ve=de[1],pe=(0,s.useState)(new Map),ge=(0,r.Z)(pe,2),fe=ge[0],me=ge[1],be=(0,s.useContext)(p.w).setAlerts,ye=(0,s.useContext)(g.z),Te=ye.globals,he=ye.setGlobals,ke=y.d.getSessionStorage("myApps"),xe=(null===ke||void 0===ke?void 0:ke.dynamicConfig.enableDockTag)||!1,De=(null===ke||void 0===ke?void 0:ke.dynamicConfig.enableTwoTier)||!1,Ze=(null===ke||void 0===ke?void 0:ke.dynamicConfig.enableNewTCLRoute)||!1,Se=(null===ke||void 0===ke?void 0:ke.dynamicConfig.enableRegulatedItemChange)||!1,Ce=(null===ke||void 0===ke?void 0:ke.dynamicConfig.enableHeavyLiftLabel)||!1,je=(null===ke||void 0===ke?void 0:ke.dynamicConfig.heavyLiftThreshold)||1e9,Le=function(){var e=(0,o.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.T.isPrinterSelected();case 2:e.sent?He(n):(be({error:"No printer selected, please select a printer to receive"}),m.t7.error("Dock-Tag: No printer selected, please select a printer to receive",{}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ie=function(t){var o,r,i,c,l,s,d=null===(o=t.data.instruction)||void 0===o||null===(r=o.container)||void 0===r?void 0:r.inventoryStatus,u=null===(i=t.data.instruction)||void 0===i||null===(c=i.container)||void 0===c?void 0:c.ctrLabel,v=null===(l=t.data.instruction)||void 0===l||null===(s=l.container)||void 0===s?void 0:s.trackingId;if(ae(u),le(v),"PICKED"==d)if(u){var p,g,f,b;m.t7.info("Scan-Dock-Tag-Or-Tcl: printjob request",u);var y=parseFloat(null===(p=t.data.deliveryDocuments[0])||void 0===p||null===(g=p.deliveryDocumentLines[0])||void 0===g||null===(f=g.additionalInfo)||void 0===f?void 0:f.weightQty)||0,T=(parseFloat(null===(b=t.data.instruction)||void 0===b?void 0:b.receivedQuantity)||0)*y;if(ve(T),Ce&&T>=je){var h={trackingId:v,correlationId:O};m.t7.info("Heavy Lift Label Popup: Popup Displayed",h),ee(!0)}else Le(u)}else m.t7.error("Scan-Dock-Tag-Or-Tcl: printjob not found",{}),console.error("No print job found"),be({error:"No print job found"});else if("AVAILABLE"==d){var k,x,D,Z;n("/breakpack",{state:(0,a.Z)((0,a.Z)({},e),{},{deliveryNumber:null===(k=t.data.instruction)||void 0===k?void 0:k.deliveryNumber,scannedTclorDockTagValue:P,itemQuantity:null===(x=t.data.instruction)||void 0===x?void 0:x.receivedQuantity,trackingId:null===(D=t.data.instruction)||void 0===D||null===(Z=D.container)||void 0===Z?void 0:Z.trackingId,printJob:u})})}else m.t7.error("Scan-Dock-Tag-Or-Tcl: inventoryStatus ".concat(d," not supported"),{}),console.error("Other types are not supported yet"),be({error:"Other inventoryStatus ".concat(d," not supported.")})};(0,s.useEffect)((function(){he((0,a.Z)((0,a.Z)({},Te),{},{multiSku:!1}));""!=E&&Ze&&25!==E.length&&n("/scan-upc",{state:(0,a.Z)((0,a.Z)({},e),{},{poNumber:q,scannedTclorDockTagValue:P,dockScanUpc:E,isTCLRoute:!0,parsed2DMap:fe})})}),[q,E,fe]);var Ne=(0,l.useQuery)(["tclOrDockTag",P],(function(){return be({loading:!0}),De?(o=P,a=null===e||void 0===e?void 0:e.doorNumber,(0,b.i)(f.GH.getLPNorDockTag(o,a),{description:"Scan-LPN-Dock-Tag: lpnOrDockTag ".concat(o," info")})):xe?(t=P,(0,b.i)(f.GH.getDockTagInfo(t),{description:"Scan-Dock-Tag: docktag ".concat(t," info")})):(n=P,(0,b.i)(f.GH.getTclInfo(n),{description:"Scan-Tcl: tcl ".concat(n," validation")}));var n,t,o,a}),{enabled:!!P,onSuccess:De?function(t){be({success:"Dock Tag found"}),J(t);var o;if(o=null==t.data.delivery,m.t7.action("Scan-Dock-Tag-Or-Tcl: navigate to scan-upc page"),o){var r=(0,I.GF)(t.data.deliveryDocuments[0].deliveryDocumentLines[0].transportationModes)||null;Se&&r?(m.t7.action("Scan-Dock-Tag-Or-Tcl: Regulated Item"),V(!0)):(m.t7.action("Scan-Dock-Tag-Or-Tcl: Not a regulated Item"),Ie(t))}else n("/scan-upc",{state:(0,a.Z)((0,a.Z)({},e),{},{deliveryNumber:t.data.delivery.deliveryNumber,scannedTclorDockTagValue:P})})}:xe?function(t){be({success:"Dock Tag found"}),m.t7.action("Scan-Dock-Tag-Or-Tcl: navigate to scan-upc page"),n("/scan-upc",{state:(0,a.Z)((0,a.Z)({},e),{},{deliveryNumber:t.data.delivery.deliveryNumber,scannedTclorDockTagValue:P})})}:function(t){be({success:"TCL found"}),m.t7.action("Scan-Dock-Tag-Or-Tcl: navigate to scan-upc page"),n("/scan-upc",{state:(0,a.Z)((0,a.Z)({},e),{},{deliveryNumber:t.data.deliveryNumber,scannedTclorDockTagValue:P})})},onError:De?function(e){var n,t;be({error:(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.errorMessage)||(null===e||void 0===e?void 0:e.message)||"Dock Tag / LPN error"})}:xe?function(e){var n,t;Ze||be({error:(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.errorMessage)||(null===e||void 0===e?void 0:e.message)||"Dock Tag error"})}:function(e){var n,t;be({error:(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.errorMessage)||(null===e||void 0===e?void 0:e.message)||"TCL error"})}}).refetch,Pe=function(e){m.t7.action("Scan-Dock-Tag-Or-Tcl: entered/scanned ".concat(e));Ze&&25!==e.length?M(e):P===e?Ne():R(e)};(0,T.T)((function(e){var n=e.detail.parsed.get("1D"),t=e.detail.parsed.get("2D");t?t.get("400")&&t.get("01")&&t.get("30")?(me(t),G(t.get("400")),Pe(t.get("01")),t.get("gs1")&&he((0,a.Z)((0,a.Z)({},Te),{},{previouslyScannedDataList:[t.get("gs1")]}))):be({error:"System is unable to process QR code at the moment. Please scan item UPC to receive."}):n&&!t?Pe(n):be({error:"Unexpected barcode scanned ".concat(e.detail.scanned)})})),(0,S.q)({title:Ze?"Enter Dock Tag / UPC":xe?"Enter Dock Tag / LPN":"Enter TCL",inputLabel:Ze?"Dock Tag / UPC":xe?"Dock Tag / LPN":"TCL",onClickGlobalKeyboardConfirm:function(e){return Pe(e)}},[P]);var we=(0,s.useCallback)((function(){m.t7.action("Scan-Dock-Tag: Back button clicked"),n("/scan-cart",{state:(0,a.Z)({},e),replace:!0})}),[n,e]),Oe=(0,s.useCallback)((function(t){m.t7.info("Scan-Dock-Tag-Or-Tcl: printjob success",t),be({success:"Labels were sent to printing"}),m.t7.action("Scan-Dock-Tag-Or-Tcl: navigate to scan-dock-tag page"),n("/scan-dock-tag-or-tcl",{state:{cartId:null===e||void 0===e?void 0:e.cartId,doorNumber:null===e||void 0===e?void 0:e.cartId}})}),[be,e,n]),Re=(0,s.useCallback)((function(e){m.t7.error("Scan-Dock-Tag-Or-Tcl: printjob error",e),be({error:"There was an error printing. Check the printer status or re-connect to continue."})}),[be]),Ae=(0,C.G)({onPrintRequestSuccess:Oe,onPrintRequestError:Re}),He=(0,r.Z)(Ae,1)[0];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Z.b,{icon:(0,w.jsx)(v.Z,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},disabled:!0,children:(0,w.jsx)(x.S,{})}),title:xe?Ze?"Scan Box Id / UPC / Dock Tag / LPN":"Dock Tag / LPN":"Scan TCL",enableBack:!0,onClickBack:we}),$&&oe&&ce&&ue&&(0,w.jsx)(N.Z,{open:!0,header:"Heavy Lift Label",content:"We've identified this Box is heavy! (".concat(ue," Lbs). Please place a Heavy label and carefully handle this case.\n\n\n          Esta caja es pesada! (").concat(ue," Lbs). Coloque una pagetina de 'Heavy' y manipule con cuidado esta caja.\n\n\n          Cette caisse est lourde! (").concat(ue," Lbs). Ajoutez une etiquette 'Heavy' et faites attention quand vous manipulez cette caisse."),handleConfirm:function(){be({loading:!0});var e={trackingId:ce,correlationId:O};m.t7.info("Heavy Lift Label Popup: Confirm",e),ee(!1),ae(null),le(void 0),Le(oe)}}),Q&&(0,w.jsx)(L.T,{regulatedItemDeliveryDocLine:null!==_&&void 0!==_&&_.data.deliveryDocuments?null===_||void 0===_?void 0:_.data.deliveryDocuments[0].deliveryDocumentLines[0]:null,open:Q,onApprove:function(){V(!1),Ie(_)},onClose:function(){V(!1)}}),(0,w.jsx)(u.Z,{sx:{mt:17}}),(0,w.jsx)(k.D,{id:"Cart #: ".concat(null===e||void 0===e?void 0:e.cartId),children:(0,w.jsx)(D.z,{})})]})}},626:function(e,n,t){t.d(n,{T:function(){return f}});var o=t(2791),a=t(4554),r=t(6151),i=t(5289),c=t(7123),l=t(9157),s=t(5661),d=t(890),u=t(7895),v=t(7774),p=t(1632),g=t(184),f=(0,o.memo)((function(e){var n=e.open,t=e.onApprove,o=e.onClose,f=e.regulatedItemDeliveryDocLine;if(!f)return null;var m=u.d.getSessionStorage("myApps"),b=(null===m||void 0===m?void 0:m.dynamicConfig.enableRegulatedItemChange)||!1,y=b?f.description:f.itemDescription1,T=b?f.itemUpc:f.itemUPC,h=(0,v.Cn)(f),k=h.text,x=void 0===k?"":k,D=h.images;return(0,g.jsxs)(i.Z,{open:n,onClose:o,"aria-labelledby":"regulated-item-modal-title","aria-describedby":"regulated-item-modal-description",children:[(0,g.jsxs)(s.Z,{id:"alert-dialog-title",sx:p.W.dialogText,children:[(0,g.jsx)(d.Z,{variant:"h6",component:"div",sx:{fontWeight:"bold"},children:x}),(0,g.jsx)(d.Z,{variant:"caption",component:"div",children:"Please confirm all cases include the labels below."})]}),(0,g.jsxs)(l.Z,{sx:p.W.dialogText,children:[(0,g.jsx)(v.jS,{imageUrls:D}),(0,g.jsxs)(a.Z,{id:"alert-dialog-description",sx:{color:"white"},children:[(0,g.jsx)(d.Z,{variant:"h6",sx:p.W.itemDescription,children:y}),(0,g.jsx)(d.Z,{gutterBottom:!0,variant:"body2",children:"UPC: ".concat(T)})]})]}),(0,g.jsx)(a.Z,{sx:p.W.info,children:"Please apply this label or confirm the label is applied."}),(0,g.jsx)(c.Z,{children:(0,g.jsx)(r.Z,{variant:"contained",sx:p.W.button,onClick:t,children:"Continue"})})]})}));f.displayName="RegulatedItemModal"},7394:function(e,n,t){var o=t(5318);n.Z=void 0;var a=o(t(5649)),r=t(184),i=(0,a.default)((0,r.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");n.Z=i},5661:function(e,n,t){var o=t(7462),a=t(3366),r=t(2791),i=t(8182),c=t(2039),l=t(890),s=t(7630),d=t(1046),u=t(7673),v=t(5090),p=t(184),g=["className","id"],f=(0,s.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,n){return n.root}})({padding:"16px 24px",flex:"0 0 auto"}),m=r.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiDialogTitle"}),l=t.className,s=t.id,m=(0,a.Z)(t,g),b=t,y=function(e){var n=e.classes;return(0,c.Z)({root:["root"]},u.a,n)}(b),T=r.useContext(v.Z).titleId,h=void 0===T?s:T;return(0,p.jsx)(f,(0,o.Z)({component:"h2",className:(0,i.Z)(y.root,l),ownerState:b,ref:n,variant:"h6",id:h},m))}));n.Z=m},7762:function(e,n,t){t.d(n,{Z:function(){return a}});var o=t(181);function a(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=(0,o.Z)(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==t.return||t.return()}finally{if(l)throw i}}}}}}]);
//# sourceMappingURL=527.2205812a.chunk.js.map